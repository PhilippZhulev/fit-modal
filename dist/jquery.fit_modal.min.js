!function(a){jQuery.fn.fit_modal=function(b){b=a.extend({modal_frame:".modal__frame",modal_window:".modal__window",modal_body:".modal__window__body",modal_title_class:".modal__window__title",modal_title:"Modal window",modal_content_block:null,frame_animation_speed:300,win_animation_speed:500,window_animation_type:"fade_in_top",modal_close:".modal__window__close",fast_create:!0,active_custom_func:null,close_custom_func:null,window_style:{},frame_style:{},on_ajax_mod:!1,ajax_mod:{href:null,post_type:"GET",data:null,error_message:"Server error or page not found.",success_custom_func:null,error_custom_func:null},close_on_bg:!0,responsive_mod:{media:0,on_custom:null,off_custom:null,custom_func:null},fix_fw_el:null,fix_right_el:null,set_blur:null},b);var c=function(){function c(a){return a.slice(1)}function d(a){return o.parents(a).length<1?o.parents(a).addClass(c(m)):(m="."+p,o.parents(a).addClass(c(m)))}function e(b,c){a(b+m).addClass(c)}function f(b,c){a(b+m).removeClass(c)}function g(b,c){a(b).css("transition","all "+c+"ms")}function h(c){var d=b.set_blur,e=a(d);if(null!==d)return 1===c&&"init"!==c?(e.css("transition","all "+b.frame_animation_speed+"ms"),e.addClass("fit__blur")):(e.removeAttr("style"),e.removeClass("fit__blur"))}function i(a){return c(a).replace("."," ")}function j(){function c(){f(b.modal_frame,"fit_modal_open"),y.removeClass("fit_modal_open").removeAttr("style"),a(b.fix_fw_el+","+b.fix_right_el).removeAttr("style"),h(0),clearTimeout(d),l.trigger("fm.onCloseFrame")}f(b.modal_window,"fit_modal_open"),null!==b.close_custom_func&&b.close_custom_func(l,m);var d=setTimeout(c,b.win_animation_speed);l.trigger("fm.onClose")}function k(){a(window).width()<z.media?(e(b.modal_window,"modal__responsive"),l.trigger("fm.onResponsive"),void 0!==z.on_custom&&z.on_custom(l)):(f(b.modal_window,"modal__responsive"),l.trigger("fm.offResponsive"),void 0!==z.off_custom&&z.off_custom(l)),void 0!==z.custom_func&&z.custom_func(l)}var l=a(this),m=".fm_"+function(a,b){return Math.floor(Math.random()*(b-a))+a}(135,1235e3),n=l.attr("data-content_block");n&&(b.modal_content_block=n);var o=a(b.modal_content_block),p=o.attr("data-index");void 0===p&&o.attr("data-index",c(m)),d(b.modal_frame),d(b.modal_window),b.modal_frame+=m,b.modal_window+=m;var q=document.createElement("div");q.className="scroll-bar__measure",document.body.appendChild(q);var r=q.offsetWidth-q.clientWidth;document.body.removeChild(q);var s=function(){a(b.modal_body).children().hide()},t=l.attr("data-win-animation");h("init"),!0===b.fast_create&&a(b.modal_frame).length<1&&a(o).wrapAll('<div class="'+i(b.modal_frame)+'"><div class="'+i(b.modal_window)+'"><div class="'+i(b.modal_body)+'">').parents(b.modal_window).prepend('<div class="modal__window__header"><div class="'+i(b.modal_close)+'"></div><div class="'+i(b.modal_title_class)+'"></div></div>'),s(),t?e(b.modal_window,"fit_"+t):e(b.modal_window,"fit_"+b.window_animation_type);var u=a(b.modal_frame),v=a(b.modal_window),w=l.attr("data-title"),x=a(b.modal_title_class),y=a("html");if(u.css(b.frame_style),v.css(b.window_style),l.on("click on.modal.active",function(c){function d(){e(b.modal_window,"fit_modal_open"),g(v,b.win_animation_speed),clearTimeout(i),l.trigger("fm.onWindow")}function f(){i=setTimeout(d,b.frame_animation_speed)}c.preventDefault(),s(),h(1),y.height()<=a(window).height()&&(r=0),w?x.html(w):x.html(b.modal_title),o.show(),g(u,b.frame_animation_speed),e(b.modal_frame,"fit_modal_open"),y.addClass("fit_modal_open"),y.css("padding-right",r),null!==b.fix_fw_el&&a(b.fix_fw_el).css({"padding-right":r}),null!==b.fix_right_el&&a(b.fix_right_el).css({"margin-right":r});var i;if(null!==b.active_custom_func&&b.active_custom_func(l,m),!0===b.on_ajax_mod){var j=b.ajax_mod,k=l.attr("data-href");k&&(j.href=k);var n=a(".fit_modal__load");a.ajax({url:j.href,type:j.post_type,data:j.data,async:!0,beforeSend:function(){u.append('<div class="fit_modal__load"></div>')},success:function(a){o.load(k,function(){n.remove(),f()}),null!==j.success_custom_func&&j.success_custom_func(l,a)},error:function(a){o.html(j.error_message),n.remove(),f(),null!==j.error_custom_func&&j.error_custom_func(l,a)}})}else f();return l.trigger("fm.onActive"),!0}),a(b.modal_close).on("click on.modal.close",function(){j()}),!0===b.close_on_bg&&u.click(function(a){v.is(a.target)||0!==v.has(a.target).length||j()}),0!==b.responsive_mod.media){var z=b.responsive_mod;k(),a(window).resize(k)}};return this.each(c)}}(jQuery);